# ğŸ§  ê¼¬ê¼¬ë¶ - AI ì„¤ê³„ ê°œìš”

**ê¼¬ê¼¬ë¶**ì€ ì•„ì´ë“¤ì´ ìƒìƒí•œ ì´ì•¼ê¸°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ AIì™€ í•¨ê»˜ ë™í™”ì±…ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” EduTech ê¸°ë°˜ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.  
ì´ ë””ë ‰í„°ë¦¬ëŠ” í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ **AI ì²˜ë¦¬ íŒŒíŠ¸**ë¡œ, ìŒì„± ìˆ˜ì§‘ë¶€í„° ìŠ¤í† ë¦¬ êµ¬ì„±, ì´ë¯¸ì§€ ìƒì„±, ìŒì„± í•©ì„±ê¹Œì§€ ì „ ê³¼ì •ì„ í¬í•¨í•©ë‹ˆë‹¤.

---

## ğŸ§© AI ì‹œìŠ¤í…œ êµ¬ì„±

### ğŸ¤– Chat-bot A (ì´ì•¼ê¸° ì‹œì‘ ì±—ë´‡ - "ë¶€ê¸°")
- **ì—­í• **: ì•„ì´ì˜ ìŒì„±ì„ ì‹¤ì‹œê°„ ìˆ˜ì§‘í•˜ê³ , ì¤„ê±°ë¦¬ë¥¼ ìš”ì•½, ê·¸ë¦¬ê³  ì•„ì´ì˜ ì´ì•¼ê¸°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ëŒ€í™”ë¥¼ í†µí•´ ì´ì•¼ê¸° ìœ ë„
- **ëª¨ë¸**: `gpt-4o-mini`
- **ëŒ€í™” í”„ë¡¬í”„íŠ¸ íŠ¹ì§•**:
  - ì—°ë ¹ë³„(4-5ì„¸, 6-7ì„¸, 8-9ì„¸) ë§ì¶¤í˜• ì–¸ì–´ ì‚¬ìš©
  - ì•„ì´ì˜ ê´€ì‹¬ì‚¬ ê¸°ë°˜ ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™” ìœ ë„
  - ì´ì•¼ê¸° ë‹¨ê³„ë³„(ìºë¦­í„°, ë°°ê²½, ë¬¸ì œ, í•´ê²°) ìˆ˜ì§‘ ì „ëµ
  - ê²©ë ¤ì™€ ìì—°ìŠ¤ëŸ¬ìš´ í›„ì† ì§ˆë¬¸ìœ¼ë¡œ ìƒìƒë ¥ í™•ì¥
  - êµìœ¡ì  ê°€ì¹˜ë¥¼ ë‹´ì€ ë‚´ìš©ìœ¼ë¡œ ìœ ë„
- **ê¸°ìˆ  ìš”ì†Œ**:
       - ì‹¤ì‹œê°„ ìŒì„± ìŠ¤íŠ¸ë¦¬ë° ìˆ˜ì‹  (WebSocket ê¸°ë°˜)
       - `RNNoise`ë¡œ ë…¸ì´ì¦ˆ ì œê±°
       - `Whisper`ë¥¼ ì´ìš©í•œ ìŒì„± â†’ í…ìŠ¤íŠ¸ ë³€í™˜
       - GPT-4o-minië¡œ ëŒ€í™” ìš”ì•½ ë° ì¤„ê±°ë¦¬ ìƒì„±
       - `ElevenLabs` APIë¥¼ í†µí•´ ìŒì„± í´ë¡œë‹ ìš”ì²­
       - **ì—”ë“œí¬ì¸íŠ¸**: `/ws/audio`
       - **í”„ë¡œí† ì½œ**: WebSocket (ws/wss)
       - **ì¸ì¦**: Query íŒŒë¼ë¯¸í„°ë¡œ í† í° ì „ë‹¬ (example: `?token=valid_token`)
       - **ì‚¬ìš©ì ì •ë³´**: Query íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ (example: `?child_name=ë¯¼ì¤€&age=5&interests=ê³µë£¡,ìš°ì£¼,ë™ë¬¼`)
       - **ì˜¤ë””ì˜¤ ì „ì†¡**: chunk ë‹¨ìœ„ ë°”ì´ë„ˆë¦¬(16kHz, mono, wav/opus ë“±)
       - **chunk ê¸°ì¤€**: 2ì´ˆ ë˜ëŠ” 128KBë§ˆë‹¤ ì„œë²„ê°€ ì²˜ë¦¬
       - **ì‘ë‹µ**: í•­ìƒ JSON íŒ¨í‚·
              - `type`: "ai_response"
              - `text`: AI í…ìŠ¤íŠ¸ ì‘ë‹µ
              - `audio`: base64 ì¸ì½”ë”©ëœ mp3(ìŒì„±)
              - `status`: "ok", "partial", "error"
              - `user_text`: ì¸ì‹ëœ ì‚¬ìš©ì í…ìŠ¤íŠ¸ (STT ê²°ê³¼)
              - `error_message`, `error_code`: (ì—ëŸ¬ ë°œìƒ ì‹œ)
       - **ì—ëŸ¬**: typeì´ "error"ì¸ íŒ¨í‚·ìœ¼ë¡œ ì•ˆë‚´
       - **ë³´ì•ˆ**: ìš´ì˜ í™˜ê²½ì—ì„œëŠ” HTTPS/WSS, ì¸ì¦ í•„ìˆ˜
       - **ëª¨ë‹ˆí„°ë§**: ì„œë²„ ë¡œê·¸(logging) ê¸°ë°˜ ì—ëŸ¬ ì¶”ì 
       - **ëŒ€í™” ì €ì¥**: ì—°ê²° ì¢…ë£Œ ì‹œ ìë™ ì €ì¥ (output/conversations í´ë”)

### ğŸ¢ Chat-bot B (ìŠ¤í† ë¦¬ ì™„ì„± ì±—ë´‡ - "ê¼¬ê¸°")
- **ì—­í• **: ë¶€ê¸°ê°€ ë§Œë“  ì¤„ê±°ë¦¬ì™€ ìŒì„± í´ë¡ ì„ ë°”íƒ•ìœ¼ë¡œ ì „ì²´ ë™í™” êµ¬ì„±
- **ëª¨ë¸**: `GPT-4o, DALLÂ·E 3, ElevenLabs API`
- **ê¸°ìˆ  ìš”ì†Œ**:
  - `GPT-4o`ë¡œ ìƒì„¸ ìŠ¤í† ë¦¬ ë° ëŒ€ì‚¬ ìƒì„±
  - `DALLÂ·E 3`ë¡œ ì‚½í™” ìƒì„± (í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ê¸°ë°˜)
  - `ElevenLabs`ë¡œ ê°ì •/í†¤ ë°˜ì˜ëœ ìŒì„± í•©ì„±

---

## ğŸ” AI ë‚´ë¶€ êµ¬ì¡° íë¦„

```plaintext
[ì•„ì´ ìŒì„± ì…ë ¥]
       â†“
[ë¶€ê¸°: ìŒì„± ì¸ì‹ + ë‹¨ê³„ë³„ ì´ì•¼ê¸° ìˆ˜ì§‘ + ìŒì„± í´ë¡œë‹ ìš”ì²­]
       â†“
[ê¼¬ê¸°: ì¤„ê±°ë¦¬ ê¸°ë°˜ ìƒì„¸ ìŠ¤í† ë¦¬/ì‚½í™”/ìŒì„± ìƒì„±]
       â†“
[ì•±ìœ¼ë¡œ ë™í™”ì±… ì „ë‹¬ ë° ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘]
```

---

## ğŸ”„ WebSocket API ì‚¬ìš©ë²•

### WebSocket ì—°ê²°
```javascript
const ws = new WebSocket("wss://your-server.com/ws/audio?token=valid_token&child_name=ë¯¼ì¤€&age=5&interests=ê³µë£¡,ìš°ì£¼,ë™ë¬¼");

// ë©”ì‹œì§€ ìˆ˜ì‹ 
ws.onmessage = (event) => {
  const response = JSON.parse(event.data);
  
  // í…ìŠ¤íŠ¸ ì²˜ë¦¬
  console.log("AI ì‘ë‹µ:", response.text);
  
  // ì˜¤ë””ì˜¤ ì²˜ë¦¬ (base64 ë””ì½”ë”© í›„ ì¬ìƒ)
  if (response.audio) {
    const audio = new Audio("data:audio/mp3;base64," + response.audio);
    audio.play();
  }
};

// ì˜¤ë””ì˜¤ ë°ì´í„° ì „ì†¡ (ì˜ˆ: MediaRecorder ì‚¬ìš©)
navigator.mediaDevices.getUserMedia({ audio: true })
  .then(stream => {
    const mediaRecorder = new MediaRecorder(stream);
    mediaRecorder.ondataavailable = (event) => {
      if (event.data.size > 0 && ws.readyState === WebSocket.OPEN) {
        ws.send(event.data);
      }
    };
    // 100msë§ˆë‹¤ ì˜¤ë””ì˜¤ ë°ì´í„° ì „ì†¡
    mediaRecorder.start(100);
  });
```

### ì‘ë‹µ í˜•ì‹
```json
{
  "type": "ai_response",
  "text": "ì•ˆë…• ë³‘ì°¬ì•„! ì˜¤ëŠ˜ì€ ì–´ë–¤ ì´ì•¼ê¸°ë¥¼ ë§Œë“¤ê³  ì‹¶ë‹ˆ?",
  "audio": "base64_encoded_audio_data...",
  "status": "ok",
  "user_text": "ì•ˆë…• ë°˜ê°€ì›Œ"
}
``

### ì—ëŸ¬ ì‘ë‹µ í˜•ì‹
```json
{
  "type": "error",
  "error_message": "ì˜¤ë””ì˜¤ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤",
  "error_code": "whisper_error",
  "status": "error"
}
```
